---
title:作用域
---

# 作用域


### 编译：源代码执行之前的步骤

分词/词法分析：字符串 ---> 有意义的代码块（词法单元）

解析/语法分析：词法单元流 ---> 代表程序语法结构的树（抽象语法树）

代码生成：AST ---> 可执行代码

---

### 变量赋值的操作

**编译器：**
1.如果没有声明过，则声明。

2.生成运行时用的，在作用域查找变量的代码。

引擎：
运行时运行上面生成的（2）代码

**查询类型：**
LHS：变量作为赋值操作的目标（赋予）

RHS：变量作为赋值操作的源头（获取）

传参---LHS，将参数调用---RHS，查看对象的方法---RHS，调用函数---RHS

**如果查询未找到变量：**
RHS：抛出 ReferenceError 异常（一个与作用域判别相关的异常）。

LHS：非严格模式下，在全局作用域创建一个。严格模式下，抛出 ReferenceError。

**查询到了，但操作不合理：**

RHS：TypeError （作用域判别成功，操作相关异常）

一道题测试：说出下面代码的LHS和RHS
```
function foo(a) {   
var b = a;     //LHS：参数赋值 b=..; RHS:调用参数 a
return a + b;  //RHS：调用参数 a ，调用参数 b
}
var c = foo( 2 );  //LHS：c=2 ， 参数赋值 a=2   RHS：调用函数foo
```